/* Design Notes Anchor Positioning
 *
 * Note: anchor() functions MUST be in CSS, not inline styles.
 * React inline styles pass "anchor(right)" as a literal string,
 * which the browser treats as invalid CSS (causing top-left clustering).
 */

.design-note {
  position: absolute;
  /* position-anchor is applied via inline style for dynamic anchor binding */
}

/* Position variants - annotation appears on this side of the anchor */
.design-note[data-position="right"] {
  left: anchor(right);
  top: anchor(center);
  translate: 16px -50%;
}

.design-note[data-position="left"] {
  right: anchor(left);
  top: anchor(center);
  translate: -16px -50%;
}

.design-note[data-position="top"] {
  bottom: anchor(top);
  left: anchor(center);
  translate: -50% -16px;
}

.design-note[data-position="bottom"] {
  top: anchor(bottom);
  left: anchor(center);
  translate: -50% 16px;
}

/* Fallback for browsers without anchor positioning support */
@supports not (anchor-name: --test) {
  .design-note {
    /* Fall back to percentage-based positioning via CSS custom properties */
    top: var(--fallback-y, 50%);
    left: var(--fallback-x, 50%);
    translate: -50% -50%;
  }
}

/* Mobile Design Note Markers */
.design-note-marker {
  position: absolute;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--accent, #ef4444);
  color: white;
  font-size: 12px;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 10;
  border: 2px solid white;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* Expand tap target */
.design-note-marker::before {
  content: '';
  position: absolute;
  inset: -10px;
}

.design-note-marker[data-position="right"] {
  left: anchor(right);
  top: anchor(center);
  translate: 8px -50%;
}

.design-note-marker[data-position="left"] {
  right: anchor(left);
  top: anchor(center);
  translate: -8px -50%;
}

@media (min-width: 1024px) {
  .design-note-marker {
    display: none;
  }
}

@supports not (anchor-name: --test) {
  .design-note-marker {
    display: none; /* Hide on unsupported browsers for mobile */
  }
}
